{% extends 'base.html' %}
{% load blog_extras %}

{% block title %}{{ post.title }} | TrackMyRupee{% endblock %}

{% block meta_tags %}
<meta name="description" content="{{ post.summary }}">
<meta name="keywords" content="finance, budget, expense tracker, {{ post.title }}, TrackMyRupee">
<meta name="author" content="Omkar Pathak">

<!-- Open Graph / Facebook -->
<meta property="og:type" content="article">
<meta property="og:url" content="{{ request.build_absolute_uri }}">
<meta property="og:title" content="{{ post.title }}">
<meta property="og:description" content="{{ post.summary }}">
{% if post.image %}
<meta property="og:image" content="{{ post.image.url }}">
{% else %}
<meta property="og:image" content="https://trackmyrupee.com/static/img/og-preview.png">
{% endif %}

<!-- Twitter -->
<meta property="twitter:card" content="summary_large_image">
<meta property="twitter:title" content="{{ post.title }}">
<meta property="twitter:description" content="{{ post.summary }}">
{% if post.image %}
<meta property="twitter:image" content="{{ post.image.url }}">
{% else %}
<meta property="twitter:image" content="https://trackmyrupee.com/static/img/og-preview.png">
{% endif %}

<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "{{ post.title }}",
  "datePublished": "{{ post.published_date|date:'Y-m-d' }}",
  "dateModified": "{{ post.updated_date|date:'Y-m-d' }}",
  "author": {
    "@type": "Person",
    "name": "Omkar Pathak"
  },
  "publisher": {
    "@type": "Organization",
    "name": "TrackMyRupee",
    "logo": {
        "@type": "ImageObject",
        "url": "https://trackmyrupee.com/static/img/icon.png"
    }
  },
  "description": "{{ post.summary }}",
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "{{ request.build_absolute_uri }}"
  }
}
</script>
{% endblock %}

{% block content %}
<div class="container py-5">
    <div class="row justify-content-center">
        <div class="col-lg-8">
            <nav aria-label="breadcrumb" class="mb-4">
                <ol class="breadcrumb">
                    <li class="breadcrumb-item"><a href="{% url 'blog_list' %}" class="text-decoration-none">Blog</a></li>
                    <li class="breadcrumb-item active" aria-current="page">{{ post.title }}</li>
                </ol>
            </nav>

            <article>
                <h1 class="display-5 fw-bold mb-3">{{ post.title }}</h1>
                <div class="text-muted mb-5 d-flex align-items-center">
                    <i class="bi bi-calendar3 me-2"></i> {{ post.published_date|date:"F j, Y" }}
                </div>

                <div class="blog-content fs-5 lh-lg text-break">
                    {{ post.content|markdown }}
                </div>
            </article>

            <div class="mt-5 pt-4 border-top text-center">
                <a href="{% url 'blog_list' %}" class="btn btn-outline-primary rounded-pill px-4">
                    <i class="bi bi-arrow-left me-1"></i> Back to Blog
                </a>
            </div>
        </div>
    </div>
</div>
{% endblock %}
